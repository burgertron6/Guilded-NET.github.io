<!DOCTYPE html>
<html>

<head>
    <title>Guilded.NET</title>
    <link rel="icon" href="https://raw.githubusercontent.com/Guilded-NET/Guilded.NET/main/assets/IconWhiteOutline.png">
    <!-- HTML encoding -->
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <!-- Adds all of the styling of the website -->
    <link rel="stylesheet" type="text/css" href="../style/main.css" />
    <link rel="stylesheet" type="text/css" href="../style/documentation.css" />
    <link rel="stylesheet" type="text/css" href="../style/prism.css" />
    <link rel="stylesheet" type="text/css" href="../style/fa.css" />
    <!-- Adds all of the libraries -->
    <script src="../script/prism.js"></script>
    <!-- Guilded.NET websites JavaScript files -->
    <script src="../script/fa.js"></script>
    <script src="../script/main.js"></script>
</head>

<body>
    <!-- Top of the page -->
    <div class="pageTop">
        <img onclick="openLink('https://github.com/Guilded-NET/Guilded.NET/')" src="https://raw.githubusercontent.com/Guilded-NET/Guilded.NET/main/assets/BannerGithub.png" width="25%" />
    </div>
    <div class="navigation">
        <!-- Guilded.NET banner -->
        <button class="navButton navButtonImg" onclick="openLink('./index')">
            <img src="https://raw.githubusercontent.com/Guilded-NET/Guilded.NET/main/assets/IconWhiteOutline.png" />
        </button>
        <!-- Navigation buttons -->
        <button class="navButton" onclick="openLink('../guides')"><i class="fas fa-book-open"></i> Guides</button>
        <button class="navButton" onclick="openLink('../references')"><i class="fas fa-book"></i> References</button>
        <button class="navButton" onclick="openLink('https://github.com/Guilded-NET/Guilded.NET/')"><i class="fab fa-github"></i> Github</button>
        <button class="navButton" onclick="openLink('https://www.nuget.org/packages/Guilded.NET/')"><i class="fas fa-box"></i> NuGet</button>
        <button class="navButton" onclick="openLink('https://www.guilded.gg/Programming/groups/1DvNOxOD/channels/94a1b65f-50e4-4fb3-a355-e285e7c5257d/chat')"><i class="fab fa-guilded"></i> Discussions</button>
    </div>
    <!-- The main body of the page -->
    <div class="documentBody">
        <div class="sideInfo">
            <div class="contents">
                <h1 id="table-of-contents">Table of contents</h1>
<ul>
<li><a href="#setting-up-.net-core-project">Setting up .NET Core project</a></li>
<li><a href="#installing-the-guilded.net">Installing the Guilded.NET</a></li>
<li><a href="#setting-up-basic-ping-pong-bot">Setting up basic ping pong bot</a></li>
<li><a href="#using-error-and-login-events">Using error and login events</a></li>
<li><a href="#making-commands">Making commands</a></li>
<li><a href="#whole-code">Whole code</a></li>
<li><a href="#the-end">The end</a></li>
</ul>

            </div>
        </div>
        <div class="mainBody">
            <h1 id="setting-up.net-core-project">Setting up .NET Core project</h1>
<p>To start with the bot, we first need to setup our project.</p>
<ol>
<li>Create a new folder. You can name it whatever you want, but for our tutorial, it's going to be called <code>GuildedNETTest</code>.</li>
<li>Once you create a new folder, either open the folder with git bash, bash or whatever terminal you have. If it doesn't let you open the directory with it, then open that terminal(e.g., CMD) and type <code>cd &quot;path/to/directory/of/GuildedNETTest&quot;</code>.</li>
<li>After you went there with your terminal, type <code>dotnet new console</code>. This will create new C# project with the name of the directory. If you want to name it something else besides directory's name, you can do <code>dotnet new console -n NameOfTheProject</code>.</li>
</ol>
<p>Make sure not to close your terminal/CMD/bash for our next part.</p>
<h1 id="installing-the-guilded.net">Installing the Guilded.NET</h1>
<ol>
<li>Go over to NuGet and find <a href="https://www.nuget.org/packages/Guilded.NET/">Guilded.NET(Or click here)</a><a id="fnref:1" href="#fn:1" class="footnote-ref"><sup>1</sup></a>.</li>
<li>Select how you want to install your package.</li>
<li>Copy the given command and execute it with your terminal/bash/CMD.</li>
</ol>
<p>Give it a little time and it should install it.</p>
<h1 id="setting-up-basic-ping-pong-bot">Setting up basic ping pong bot</h1>
<p>We are going to make a basic ping bot. You need to create a new account for the bot(Or use existing one). Be sure not to forget your password or email.</p>
<h2 id="setup-bot-config">Setup bot config</h2>
<p>First thing we need to setup is our config. Create a new <code>config/config.json</code> file:</p>
<pre><code class="language-json">{
    &quot;email&quot;: &quot;example@example.com&quot;,
    &quot;password&quot;: &quot;secretpassword&quot;,
    &quot;prefix&quot;: &quot;!&quot;
}
</code></pre>
<p>Make sure you enter correct password and correct email, else the bot won't turn on, because it won't be able to log into that account.<br />
Once we have it set up, go over to <code>Program.cs</code>. Add this code to <code>Main</code> method in <code>Program</code> class:</p>
<pre><code class="language-cs">// Read JSON &quot;config/config.json&quot;
JObject config = JObject.Parse(File.ReadAllText(&quot;./config/config.json&quot;));
// Get login info
string email = config[&quot;email&quot;].Value&lt;string&gt;(),
    password = config[&quot;password&quot;].Value&lt;string&gt;(),
    prefix = config[&quot;prefix&quot;].Value&lt;string&gt;();
// Tells us that it's starting with specific prefix
Console.WriteLine($&quot;Starting the bot with prefix '{prefix}'&quot;);
</code></pre>
<p>This reads our config file and then gets email, password and prefix from it.</p>
<h2 id="creating-new-bot">Creating new bot</h2>
<p>Now we are going to make a new bot. Make sure the bot is declared in <code>using</code>, since it must be disposed at the end:</p>
<pre><code class="language-cs">// Creates new client
using GuildedUserClient client = new GuildedUserClient(email, password, new GuildedClientConfig(GuildedClientConfig.BasicPrefix(prefix))))
// Stuff here
</code></pre>
<p>But if we launch the program, it just launches the program, does nothing and instantly stops. This is where you need to make async method to connect to the Guilded &amp; stop the process from closing. Add this method:</p>
<blockquote class="note-block">
<p>If you have started with C# and don't understand what <code>///</code> or <code>//</code> does, it does literally nothing<br />
It's meant for explaining, documenting and commenting the code. If you do not like them, you can delete everything after <code>///</code> or <code>//</code>, including <code>///</code> or <code>//</code> themselves.</p>
</blockquote>
<pre><code class="language-cs">/// &lt;summary&gt;
/// Makes bot connect to Guilded and then stops it from shutting down.
/// &lt;/summary&gt;
/// &lt;param name=&quot;client&quot;&gt;Client to connect&lt;/param&gt;
/// &lt;returns&gt;Async task&lt;/returns&gt;
static async Task StartAsync(GuildedUserClient client) {
    // Connects to Guilded
    await client.ConnectAsync();
    // Makes it stop forever, so the bot wouldn't instantly shutdown after connecting
    await Task.Delay(-1);
}
</code></pre>
<p>Once we have that method, call <code>StartAsync(client).GetAwaiter().GetResult();</code>.</p>
<blockquote class="warning-block">
<p>Put that method call at the end, not at the start.</p>
</blockquote>
<p>Now the bot should log into the account and sit there. It may not show up as online and sometimes shows it's idle, but it should be ok. As of yet, if you want bot to be shown as online, you have to log into the bot's account through Guilded app/Guilded web app, turn the bot on and close Guilded app/Guilded web app.</p>
<h1 id="using-error-and-login-events">Using error and login events</h1>
<p>Now, we need to know when bot is really online! Assign a method or lambda to the event <code>client.Connected</code>:</p>
<pre><code class="language-cs">// When client is ready
client.Connected += (o, e) =&gt; Console.WriteLine($&quot;I successfully logged in!\n - ID: {client.Me.Id}\n - Name: {client.Me.Username}&quot;);
</code></pre>
<p>Once the bot is connected, it should say:</p>
<pre><code>I successfully logged in!
- ID: (ID of the user bot)
- Name: (Name of the user bot)
</code></pre>
<p>This way, you will know it surely logged on and you will know its ID.<br />
Now we need to know when an error occurs. Do the same like we did with connection event, but use <code>client.Error</code> instead:</p>
<pre><code class="language-cs">// If client emits any errors
client.Error += (o, e) =&gt; Console.WriteLine($&quot;Error [{e.Code}]: {e.ErrorMessage}&quot;);
</code></pre>
<p>Now launch the bot and it should say that the bot successfully logged in.</p>
<h1 id="making-commands">Making commands</h1>
<p>Now we need to make commands for this bot. We will create a most basic command - <code>!ping</code>.<br />
First, create a new static class. You can name it whatever you want(for example, <code>CommandList</code>).</p>
<pre><code class="language-cs">/// &lt;summary&gt;
/// List of user bot commands.
/// &lt;/summary&gt;
public static class CommandList {
    // Commands go here
}
</code></pre>
<p>Since we have command list, we need to get commands from it. To fetch commands from a type, call <code>client.FetchCommands</code> with <code>CommandList</code> type as an argument:</p>
<pre><code class="language-cs">// Fetches all commands from specific type
client.FetchCommands(
    typeof(CommandList)
);
</code></pre>
<p>Make sure you have put it anywhere above <code>StartAsync</code> call.<br />
Now we can add actual <code>ping</code> command. Add a new method to <code>CommandList</code> with <code>Command</code> attribute. Make sure it fits <code>CommandMethod</code> delegate, else Guilded.NET will throw an error at you. Here's how to make a new command:</p>
<pre><code class="language-cs">/// &lt;summary&gt;
/// Responds with `Pong!`
/// &lt;/summary&gt;
/// &lt;param name=&quot;client&quot;&gt;Client to post message with&lt;/param&gt;
/// &lt;param name=&quot;messageCreated&quot;&gt;Message creation event&lt;/param&gt;
/// &lt;param name=&quot;command&quot;&gt;Name of the command used&lt;/param&gt;
/// &lt;param name=&quot;arguments&quot;&gt;Command arguments&lt;/param&gt;
[Command(&quot;ping&quot;, &quot;pong&quot;, Description = &quot;Responds with `Pong!`&quot;)]
public static void Ping(BasicGuildedClient client, MessageCreatedEvent messageCreated, string command, IList&lt;string&gt; arguments) {
    // Do stuff here
}
</code></pre>
<p>This will create a new command with the name <code>ping</code>, alias <code>pong</code> and description <code>Responds with `Pong!` </code>. If you don't want a description or an alias, you can remove them, but don't remove the name itself.<br />
However, even if the command works, it won't actually do anything. Now we need to respond to new created message using <code>messageCreated.RespondAsync</code>:</p>
<pre><code class="language-cs">// Sends a message to channel where `ping`/`pong` command was used
await messageCreated.RespondAsync(
    // Generates a new message with content `Pong!`
    Message.Generate(&quot;Pong!&quot;)
);
</code></pre>
<ul>
<li>Doing <code>!ping</code> should respond with <code>Pong!</code>, because we are invoking the command with name <code>ping</code>.</li>
<li>Doing <code>!ping abc</code> should respond with <code>Pong!</code>, because we are invoking the command with name <code>ping</code> and arguments [<code>abc</code>].</li>
<li>Doing <code>!pingabc</code> should NOT respond, because command with name <code>pingabc</code> does not exist.</li>
<li>Doing <code>!pong</code> should also respond, because we gave the command alias <code>pong</code>.</li>
</ul>
<h1 id="whole-code">Whole code</h1>
<p><code>Program.cs</code>:</p>
<pre><code class="language-cs">using System;
using Newtonsoft.Json.Linq;
using Guilded.NET;
using System.IO;
using System.Threading.Tasks;

namespace GuildedNETTest {
    /// &lt;summary&gt;
    /// User bot client program.
    /// &lt;/summary&gt;
    public class Program {
        /// &lt;summary&gt;
        /// Creates a new user bot client.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;args&quot;&gt;Program arguments&lt;/param&gt;
        static void Main(string[] args) {
            // Read JSON &quot;config/config.json&quot;
            JObject config = JObject.Parse(File.ReadAllText(&quot;./config/config.json&quot;));
            // Get login info
            string email = config[&quot;email&quot;].Value&lt;string&gt;(),
                password = config[&quot;password&quot;].Value&lt;string&gt;(),
                prefix = config[&quot;prefix&quot;].Value&lt;string&gt;();
            // Tells us that it's starting with specific prefix
            Console.WriteLine($&quot;Starting the bot with prefix '{prefix}'&quot;);
            // Creates new client
            using GuildedUserClient client = new GuildedUserClient(email, password, new GuildedClientConfig(GuildedClientConfig.BasicPrefix(prefix)));
            // Fetches all commands from specific type
            client.FetchCommands(
                typeof(CommandList)
            );
            // If client emits any errors
            client.Error += (o, e) =&gt; Console.WriteLine($&quot;Error [{e.Code}]: {e.ErrorMessage}&quot;);
            // When client is ready
            client.Connected += (o, e) =&gt; Console.WriteLine($&quot;I successfully logged in!\n - ID: {client.Me.Id}\n - Name: {client.Me.Username}&quot;);
            // Start the bot
            StartAsync(client).GetAwaiter().GetResult();
        }
        /// &lt;summary&gt;
        /// Makes bot connect to Guilded and then stops it from shutting down.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;client&quot;&gt;Client to connect&lt;/param&gt;
        /// &lt;returns&gt;Async task&lt;/returns&gt;
        static async Task StartAsync(GuildedUserClient client) {
            // Connects to Guilded
            await client.ConnectAsync();
            // Makes it stop forever, so the bot wouldn't instantly shutdown after connecting
            await Task.Delay(-1);
        }
    }
}
</code></pre>
<p><code>CommandList.cs</code>:</p>
<pre><code class="language-cs">using Guilded.NET;
using Guilded.NET.Objects.Events;
using Guilded.NET.Objects.Chat;
using System.Collections.Generic;

namespace GuildedNETTest {
    /// &lt;summary&gt;
    /// List of user bot commands.
    /// &lt;/summary&gt;
    public static class CommandList {
        /// &lt;summary&gt;
        /// Responds with Pong!
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;client&quot;&gt;Client to post message with&lt;/param&gt;
        /// &lt;param name=&quot;messageCreated&quot;&gt;Message creation event&lt;/param&gt;
        /// &lt;param name=&quot;command&quot;&gt;Name of the command used&lt;/param&gt;
        /// &lt;param name=&quot;arguments&quot;&gt;Command arguments&lt;/param&gt;
        [Command(&quot;ping&quot;, &quot;pong&quot;, Description = &quot;Responds with Pong!&quot;)]
        public static void Ping(BasicGuildedClient client, MessageCreatedEvent messageCreated, string command, IList&lt;string&gt; arguments) {
            // Sends a message to channel where `ping`/`pong` command was used
            await messageCreated.RespondAsync(
                // Generates a new message with content `Pong!`
                Message.Generate(&quot;Pong!&quot;)
            );
        }
    }
}
</code></pre>
<p><code>config/config.json</code>:</p>
<pre><code class="language-json">{
    &quot;email&quot;: &quot;example@example.com&quot;,
    &quot;password&quot;: &quot;secretpassword&quot;,
    &quot;prefix&quot;: &quot;!&quot;
}
</code></pre>
<h1 id="the-end">The end</h1>
<p>That's it! This is how you create a ping bot while using Guilded.NET. It takes a lot... Nevertheless, it still works!</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn:1">
<p><a href="https://www.nuget.org/packages/Guilded.NET/">Guilded.NET NuGet</a><a href="#fnref:1" class="footnote-back-ref">&#8617;</a></p>
</li>
</ol>
</div>

        </div>
    </div>
</body>

</html>